# Jest ã‚µãƒ³ãƒ—ãƒ«

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€ES Moduleså¯¾å¿œã®Jestãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
jest-samples/
â”œâ”€â”€ README.md              # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ setup.ts              # Jestã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ utils/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã¨ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ calculator.ts     # è¨ˆç®—æ©Ÿèƒ½ã®ã‚µãƒ³ãƒ—ãƒ«
â”‚   â”œâ”€â”€ calculator.test.ts # è¨ˆç®—æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ stringUtils.ts    # æ–‡å­—åˆ—æ“ä½œã®ã‚µãƒ³ãƒ—ãƒ«
â”‚   â”œâ”€â”€ stringUtils.test.ts # æ–‡å­—åˆ—æ“ä½œã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ asyncUtils.ts     # éåŒæœŸå‡¦ç†ã®ã‚µãƒ³ãƒ—ãƒ«
â”‚   â””â”€â”€ asyncUtils.test.ts # éåŒæœŸå‡¦ç†ã®ãƒ†ã‚¹ãƒˆ
â””â”€â”€ components/           # å°†æ¥ã®Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆç”¨
```

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

### å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
```bash
npm test
```

### ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã«è‡ªå‹•å®Ÿè¡Œï¼‰
```bash
npm run test:watch
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ãã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
```bash
npm run test:coverage
```

### ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å®Ÿè¡Œ
```bash
# è¨ˆç®—æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã®ã¿
npx jest calculator.test.ts

# æ–‡å­—åˆ—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆã®ã¿
npx jest stringUtils.test.ts

# éåŒæœŸå‡¦ç†ã®ãƒ†ã‚¹ãƒˆã®ã¿
npx jest asyncUtils.test.ts
```

## ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«å†…å®¹

### 1. Calculator (è¨ˆç®—æ©Ÿèƒ½)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/calculator.ts`
- **ãƒ†ã‚¹ãƒˆ**: `utils/calculator.test.ts`
- **æ©Ÿèƒ½**:
  - åŸºæœ¬çš„ãªå››å‰‡æ¼”ç®—ï¼ˆåŠ ç®—ã€æ¸›ç®—ã€ä¹—ç®—ã€é™¤ç®—ï¼‰
  - å¹³æ–¹æ ¹è¨ˆç®—
  - éšä¹—è¨ˆç®—
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆã‚¼ãƒ­é™¤ç®—ã€è² æ•°ã®å¹³æ–¹æ ¹ãªã©ï¼‰

### 2. StringUtils (æ–‡å­—åˆ—æ“ä½œ)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/stringUtils.ts`
- **ãƒ†ã‚¹ãƒˆ**: `utils/stringUtils.test.ts`
- **æ©Ÿèƒ½**:
  - æ–‡å­—åˆ—ã®é€†é †å¤‰æ›
  - å›æ–‡åˆ¤å®š
  - å˜èªæ•°ã‚«ã‚¦ãƒ³ãƒˆ
  - ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹å¤‰æ›
  - ã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹å¤‰æ›
  - æ–‡å­—åˆ—ã®æœ€åˆã®æ–‡å­—ã‚’å¤§æ–‡å­—åŒ–

### 3. AsyncUtils (éåŒæœŸå‡¦ç†)
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/asyncUtils.ts`
- **ãƒ†ã‚¹ãƒˆ**: `utils/asyncUtils.test.ts`
- **æ©Ÿèƒ½**:
  - é…å»¶å‡¦ç†
  - éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  - è¤‡æ•°ã®éåŒæœŸå‡¦ç†ã®ä¸¦åˆ—å®Ÿè¡Œ
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãPromiseå®Ÿè¡Œ
  - ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãéåŒæœŸå‡¦ç†

## ğŸ”§ Jestè¨­å®š

### ä¸»è¦ãªè¨­å®šé …ç›®
- **ES Moduleså¯¾å¿œ**: `extensionsToTreatAsEsm` ã¨ `useESM` ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- **TypeScriptå¯¾å¿œ**: `ts-jest` ãƒ—ãƒªã‚»ãƒƒãƒˆä½¿ç”¨
- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³**: `jest-samples/**/*.test.(ts|tsx|js|jsx)`
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°**: `@/*` ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹å¯¾å¿œ
- **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«**: `setup.ts` ã§å…±é€šè¨­å®š

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- `jest.config.js`: Jestè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- `jest-samples/setup.ts`: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã®å…±é€šè¨­å®š

## ğŸ“Š ãƒ†ã‚¹ãƒˆä¾‹

### åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆ
```typescript
test('æ­£ã®æ•°ã®åŠ ç®—', () => {
  expect(Calculator.add(2, 3)).toBe(5);
});
```

### éåŒæœŸãƒ†ã‚¹ãƒˆ
```typescript
test('éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—', async () => {
  const userData = await fetchUserData(1);
  expect(userData.id).toBe(1);
});
```

### ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
```typescript
test('ã‚¼ãƒ­é™¤ç®—ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ', () => {
  expect(() => Calculator.divide(5, 0)).toThrow('Division by zero is not allowed');
});
```

### ãƒ¢ãƒƒã‚¯ä½¿ç”¨ãƒ†ã‚¹ãƒˆ
```typescript
test('ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½', async () => {
  const mockFn = jest.fn().mockResolvedValue('success');
  const result = await retryAsync(mockFn, 3, 10);
  expect(mockFn).toHaveBeenCalledTimes(1);
});
```

## ğŸ’¡ å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

1. **ES Modules**: `import/export` æ§‹æ–‡ã®ä½¿ç”¨
2. **TypeScript**: å‹å®‰å…¨ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
3. **éåŒæœŸãƒ†ã‚¹ãƒˆ**: `async/await` ã¨Promiseã®ãƒ†ã‚¹ãƒˆ
4. **ãƒ¢ãƒƒã‚¯**: `jest.fn()` ã‚’ä½¿ã£ãŸé–¢æ•°ã®ãƒ¢ãƒƒã‚¯åŒ–
5. **ãƒãƒƒãƒãƒ£ãƒ¼**: æ§˜ã€…ãª `expect` ãƒãƒƒãƒãƒ£ãƒ¼ã®ä½¿ç”¨
6. **ãƒ†ã‚¹ãƒˆæ§‹é€ **: `describe` ã¨ `test` ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆã®æ•´ç†
7. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ä¾‹å¤–ã®ãƒ†ã‚¹ãƒˆæ–¹æ³•

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹çµæœ

å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã€ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
 PASS  jest-samples/utils/calculator.test.ts
 PASS  jest-samples/utils/stringUtils.test.ts  
 PASS  jest-samples/utils/asyncUtils.test.ts

Test Suites: 3 passed, 3 total
Tests:       XX passed, XX total
Snapshots:   0 total
Time:        X.XXXs
``` 